webpackJsonp([1],{"52TJ":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n={data:function(){return{markerCluster:null,markers:[],polygons:[],map:{}}},methods:{initMap:function(){console.log("+> Initialize map"),this.map=new google.maps.Map(document.getElementById("map"),this.mapoptions),this.addMarkers(),this.addPolygons()},markerClick:function(t){this.$emit("markerclick",t)},addMarkers:function(){console.log("add markers");var t=this,e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";null!=this.markerCluster&&this.markerCluster.clearMarkers(),this.markers=this.mapmarkers.map(function(a,i){var n=new google.maps.Marker({position:a.latLng,label:e[i%e.length],item:a,index:i});return n.addListener("click",function(){t.markerClick(n)}),n}),this.markerCluster=new MarkerClusterer(this.map,this.markers,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})},addPolygons:function(){console.log("Add Polygons");var t=this;t.polygons.forEach(function(t,e){t.setMap(null)}),this.polygons=this.mappolygons.map(function(e,a){var i=new google.maps.Polygon(t.getPolygonFill(e.coords));return i.setMap(t.map),i})},getPolygonFill:function(t){return{paths:t,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}},mounted:function(){this.initMap()},props:["mapoptions","mapmarkers","mappolygons"],watch:{mapoptions:function(t,e){console.log("Map Data Set"),this.map.setZoom(t.zoom),this.map.setCenter(t.center),google.maps.event.trigger(this.map,"resize")},mapmarkers:function(t,e){console.log("Map Markers Set"),this.addMarkers()},mappolygons:function(t,e){console.log("Map Polygons Set"),console.log(t),this.addPolygons()}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}})},staticRenderFns:[]},l=a("VU/8")(n,r,!1,null,null,null).exports,o={data:function(){return{searchinput:""}},methods:{initAutocomplete:function(){console.log("+> Initialize search component")},select:function(t,e){this.$emit("selection",e)}},mounted:function(){this.initAutocomplete()},props:[],watch:{}},s={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.searchinput,expression:"searchinput"}],attrs:{id:"search-field",type:"text",placeholder:"Enter search terms"},domProps:{value:t.searchinput},on:{input:function(e){e.target.composing||(t.searchinput=e.target.value)}}})},staticRenderFns:[]};var p=a("VU/8")(o,s,!1,function(t){a("52TJ")},null,null).exports,c=a("mtWM"),u=a.n(c),g={name:"App",components:{gmap:l,search:p},data:function(){return{allBuildingTypes:[{value:"office",label:"Office"},{value:"hotel",label:"Hotel"},{value:"shoppingcentre",label:"Shopping Centre"},{value:"datacentre",label:"Data Centre"},{value:"apartments",label:"Apartments"}],allRatingScopes:[{value:"basebuilding",label:"Base building"},{value:"wholebuilding",label:"Whole building"},{value:"tenancy",label:"Tenancy"},{value:"infrastructure",label:"Infrastructure"},{value:"wholefacility",label:"Whole facility"},{value:"itequipment",label:"IT equipment"}],allRatingTypes:[{value:"office",label:"Office"},{value:"hotel",label:"Hotel"},{value:"shoppingcentre",label:"Shopping Centre"},{value:"datacentre",label:"Data Centre"},{value:"apartments",label:"Apartments"}],xmarkers:10,filterBuildingType:"",filterRatingScope:"",filterRatingType:"",filterStarRatingFrom:0,filterStarRatingTo:0,title:"",searchselection:"",mapoptions:{zoom:8,center:{lat:-32,lng:149},scaleControl:!0},mapmarkers:[],mappolygons:[],visibleDetails:null}},methods:{addMarker:function(){console.log("Add Marker");for(var t=[],e=Math.floor(5*Math.random()),a=0;a<e;a++)t.push({starRating:(6*Math.random()).toFixed(2),buildingType:this.allBuildingTypes[Math.floor(Math.random()*this.allBuildingTypes.length)].value,ratingScope:this.allRatingScopes[Math.floor(Math.random()*this.allRatingScopes.length)].value,ratingType:this.allRatingTypes[Math.floor(Math.random()*this.allRatingTypes.length)].value});var i=Math.floor(100*Math.random());this.mapmarkers.push({id:this.mapmarkers.length,title:"New Rating "+i,latLng:{lat:10*Math.random()-31,lng:120+25*Math.random()},desc:"New Description for marker "+i,ratings:t})},removeAllMarkers:function(){console.log("Remove markers"),this.mapmarkers=[]},bulkAddMarkers:function(){this.removeAllPolygons();for(var t=0;t<this.xmarkers;t++)this.addMarker()},addPolygon:function(){console.log("Add Polygon"),this.mappolygons.push({coords:[{lat:2*Math.random()-33,lng:149+2*Math.random()},{lat:2*Math.random()-33,lng:149+2*Math.random()},{lat:2*Math.random()-33,lng:149+2*Math.random()}]})},removeAllPolygons:function(){this.mappolygons=[]},searchSelection:function(t){console.log(t)},markerClick:function(t){this.showDetails(t.item)},listItemClick:function(t){this.showDetails(t)},updateFilter:function(){this.setQueryVariables({buildingtype:this.filterBuildingType,ratingscope:this.filterRatingScope,ratingtype:this.filterRatingType,starratingfrom:this.filterStarRatingFrom,starratingto:this.filterStarRatingTo})},setFilterFromURL:function(){var t=this.getQueryVariables();this.filterBuildingType=t.buildingtype||"",this.filterRatingScope=t.ratingscope||"",this.filterRatingType=t.ratingtype||"",this.filterStarRatingFrom=t.starratingfrom||"",this.filterStarRatingTo=t.starratingto||""},getQueryVariables:function(){var t={},e=window.location.search.substring(1);if(e.length>0)for(var a=e.split("&"),i=0;i<a.length;i++){var n=a[i].split("=");t[decodeURI(n[0])]=decodeURI(n[1])}return t},setQueryVariables:function(t){var e="?";for(var a in t)t[a].length>0&&(e.length>1&&(e+="&"),e+=encodeURI(a)+"="+encodeURI(t[a]));history.pushState(t,"",e)},showDetails:function(t){this.visibleDetails=t,this.mapoptions={zoom:10,center:{lat:t.latLng.lat,lng:t.latLng.lng}}}},mounted:function(){var t=this;this.setFilterFromURL(),u.a.get("./static/appdata.json").then(function(e){t.title=decodeURI(e.data.title)}),u.a.get("./static/markerdata.json").then(function(e){t.mapmarkers=e.data.markers}),window.onpopstate=this.setFilterFromURL},computed:{filteredmarkers:function(){var t=this;return console.log(t.filterStarRatingFrom,t.filterStarRatingTo),""==t.filterBuildingType&&""==t.filterRatingScope&&""==t.filterRatingType&&0==t.filterStarRatingFrom&&0==t.filterStarRatingTo?this.mapmarkers:this.mapmarkers.filter(function(e){var a=!1;return e.ratings.forEach(function(e){e.buildingType===t.filterBuildingType&&(a=!0),e.ratingScope===t.filterRatingScope&&(a=!0),e.ratingType===t.filterRatingType&&(a=!0);var i=parseFloat(e.starRating),n=parseFloat(t.filterStarRatingFrom),r=parseFloat(t.filterStarRatingTo);i>=n&&i<=r&&(a=!0)}),a})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"map-header"},[a("div",{staticClass:"filters"},[a("h2",[t._v("Search and Filters")]),t._v(" "),a("search",{on:{selection:function(e){t.searchSelection(e)}}}),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"building-type"}},[t._v("Building type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterBuildingType,expression:"filterBuildingType"}],attrs:{id:"building-type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filterBuildingType=e.target.multiple?a:a[0]},function(e){t.updateFilter()}]}},[a("option",{attrs:{value:""}},[t._v("Select a building type")]),t._v(" "),t._l(t.allBuildingTypes,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])})],2)]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"rating-scope"}},[t._v("Rating scope")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterRatingScope,expression:"filterRatingScope"}],attrs:{id:"rating-scope"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filterRatingScope=e.target.multiple?a:a[0]},function(e){t.updateFilter()}]}},[a("option",{attrs:{value:""}},[t._v("Select a rating scope")]),t._v(" "),t._l(t.allRatingScopes,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])})],2)]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"rating-type"}},[t._v("Rating type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filterRatingType,expression:"filterRatingType"}],attrs:{id:"rating-type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filterRatingType=e.target.multiple?a:a[0]},function(e){t.updateFilter()}]}},[a("option",{attrs:{value:""}},[t._v("Select a rating type")]),t._v(" "),t._l(t.allRatingTypes,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])})],2)]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"star-rating-from"}},[t._v("Star rating (from)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterStarRatingFrom,expression:"filterStarRatingFrom"}],attrs:{id:"star-rating-from",type:"number"},domProps:{value:t.filterStarRatingFrom},on:{change:function(e){t.updateFilter()},input:function(e){e.target.composing||(t.filterStarRatingFrom=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"field"},[a("label",{attrs:{for:"star-rating-to"}},[t._v("Star rating (to)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.filterStarRatingTo,expression:"filterStarRatingTo"}],attrs:{id:"star-rating-to",type:"number"},domProps:{value:t.filterStarRatingTo},on:{change:function(e){t.updateFilter()},input:function(e){e.target.composing||(t.filterStarRatingTo=e.target.value)}}})])],1)]),t._v(" "),a("div",{staticClass:"map-body"},[a("div",{staticClass:"map-body-map"},[a("gmap",{attrs:{mapoptions:t.mapoptions,mapmarkers:t.filteredmarkers,mappolygons:t.mappolygons},on:{markerclick:function(e){t.markerClick(e)}}}),t._v(" "),t.visibleDetails?a("div",{staticClass:"marker-details"},[a("button",{on:{click:function(e){t.visibleDetails=null}}},[t._v("Close")]),t._v(" "),a("div",{staticClass:"details"},[t._v("\n          "+t._s(t.visibleDetails.desc)+"\n          "),a("ul",t._l(t.visibleDetails.ratings,function(e,i){return a("li",{key:i,staticClass:"rating-item"},[a("span",[a("strong",[t._v("Star Rating:")]),t._v(" "+t._s(e.starRating))]),t._v(" "),a("span",[a("strong",[t._v("Building Type:")]),t._v(" "+t._s(e.buildingType))]),t._v(" "),a("span",[a("strong",[t._v("Rating Scope:")]),t._v(" "+t._s(e.ratingScope))]),t._v(" "),a("span",[a("strong",[t._v("Rating Type:")]),t._v(" "+t._s(e.ratingType))])])}))])]):t._e()],1),t._v(" "),a("div",{staticClass:"map-body-listing"},[a("div",{staticClass:"controls"},[a("h2",[t._v("Controls")]),t._v(" "),a("button",{on:{click:function(e){t.addMarker()}}},[t._v("Add Marker")]),t._v(" "),a("button",{on:{click:function(e){t.removeAllMarkers()}}},[t._v("Remove All Markers")]),t._v(" "),a("button",{on:{click:function(e){t.addPolygon()}}},[t._v("Add Polygon")]),t._v(" "),a("button",{on:{click:function(e){t.removeAllPolygons()}}},[t._v("Remove All Polygons")]),t._v(" "),a("button",{on:{click:function(e){t.bulkAddMarkers()}}},[t._v("Add X Markers")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.xmarkers,expression:"xmarkers"}],attrs:{type:"text"},domProps:{value:t.xmarkers},on:{input:function(e){e.target.composing||(t.xmarkers=e.target.value)}}})]),t._v(" "),a("h2",[t._v("Markers")]),t._v(" "),a("ul",t._l(t.filteredmarkers,function(e){return a("li",{key:e.id},[a("button",{on:{click:function(a){t.listItemClick(e)}}},[t._v(t._s(e.title))])])}))])])])},staticRenderFns:[]};var d=a("VU/8")(g,m,!1,function(t){a("X3v3")},null,null).exports;i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:d},template:"<App/>"})},X3v3:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.71b3d4e2f66739be0f92.js.map